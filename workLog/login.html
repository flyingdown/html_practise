{% extends "base.html" %}

{% block title %}登陆{% endblock %}

{% block content %}
<div>
	<div class="row" >
		<div class="col-sm-6 col-sm-offset-3" >
			<form method="post" action="" class="form-horizontal" >
				{% csrf_token %}
				<!-- 员工号 -->
				<div class="form-group has-feedback">
			    	<div class="col-sm-10 input-group">
					  	<span class="input-group-addon">
					  		<span class="glyphicon glyphicon-user"></span>
					  	</span>
		      			<input name="emp_no" type="text" class="form-control" id="inputLogName" placeholder="请输入6位员工号">
		      			<span></span>
		    		</div>
		  		</div>
				<!-- 密码 -->
				<div class="form-group">
			    	<div class="col-sm-10  input-group">
			    		<span class="input-group-addon">
					  		<span class="glyphicon glyphicon-asterisk"></span>
					  	</span>
		      			<input name="emp_passwd" type="password" class="form-control" id="inputPasswd" placeholder="请输入密码">
		      			<span></span>
		    		</div>
		  		</div>
		  		<div class="row" >
		  			<div class="col-sm-7 col-sm-offset-3" >
				  		<p class="text-right" >
				  			<button type="submit" class="btn btn-primary">登陆</button>
				  			<button type="reset" class="btn btn-danger">重置</button>
				  		</p>
		  			</div>
		  		</div>
			</form>
		</div>
	</div>
</div>
<footer class="navbar navbar-fixed-bottom text-center" >
	<span>&copy; 2016</span>
</footer>
<script src="static/js/jquery-1.11.1.js"></script>
<script src="static/bootstrap/js/bootstrap.min.js"></script>
{% endblock %}

{% block script %}
<script>
	function checkInput ( element, regexp ) {
		console.log ( regexp );
		if ( regexp.test ( element.val() ) == false )
		{
			element.parent().parent().removeClass().addClass("form-group has-feedback has-error");
			element.next().addClass ( "glyphicon glyphicon-remove form-control-feedback" );
			return false;
		}else
		{
			element.parent().parent().removeClass().addClass("form-group");
			element.next().removeClass();
			return true;
		}
	}

	$(function () {
		$('#inputLogName').blur ( function () {
			checkInput ( $(this), new RegExp ( "^\\d{6}$" ) );
		});
		$('#inputPasswd').blur (  function () {
			checkInput ( $(this), new RegExp ( "^\\S+$" ) );
		});

		$("form").submit ( function () {
			return ( checkInput ( $('#inputLogName'), new RegExp ( "^\\d{6}$" ) ) && checkInput ($('#inputPasswd'), new RegExp ( "^\\S+$" ) ) );
		});
	})
</script>
{% endblock %}
